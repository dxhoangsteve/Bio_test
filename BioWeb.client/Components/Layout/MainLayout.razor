@inherits LayoutComponentBase

<div class="gradient-background">
    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10 col-xl-8">
                <div class="glass-container my-4">
                    @if (!IsAdminPage())
                    {
                        <nav class="glass-navbar">
                            <!-- Mobile menu toggle button -->
                            <button class="mobile-menu-toggle d-lg-none" @onclick="ToggleMobileMenu">
                                <i class="fas fa-bars"></i>
                            </button>

                            <!-- Navigation items -->
                            <div class="nav-items @(isMobileMenuOpen ? "mobile-open" : "")">
                                <a href="/" class="nav-item @(IsActive("/") ? "active" : "")" @onclick="CloseMobileMenu">
                                    <i class="fa-solid fa-blog"></i>
                                </a>
                                <a href="/about-me" class="nav-item @(IsActive("/about-me") ? "active" : "")"
                                    @onclick="CloseMobileMenu">
                                    About Me
                                </a>
                                <a href="/projects" class="nav-item @(IsActive("/projects") ? "active" : "")"
                                    @onclick="CloseMobileMenu">
                                    My Project
                                </a>
                                <a href="/blog" class="nav-item @(IsActive("/blog") ? "active" : "")"
                                    @onclick="CloseMobileMenu">
                                    Blog
                                </a>
                                <a href="/contact" class="nav-item @(IsActive("/contact") ? "active" : "")"
                                    @onclick="CloseMobileMenu">
                                    Contact Me
                                </a>
                            </div>
                        </nav>
                    }
                    <!-- Content Area -->
                    <div class="glass-content">
                        @Body
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    [Inject] private NavigationManager Navigation { get; set; } = default!;

    private bool IsActive(string href)
    {
        var currentPath = Navigation.ToBaseRelativePath(Navigation.Uri);
        return currentPath.StartsWith(href.TrimStart('/'), StringComparison.OrdinalIgnoreCase);
    }

    private bool IsAdminPage()
    {
        var currentPath = Navigation.ToBaseRelativePath(Navigation.Uri);
        return currentPath.StartsWith("admin", StringComparison.OrdinalIgnoreCase) ||
        currentPath.StartsWith("me/admin", StringComparison.OrdinalIgnoreCase);
    }

    private bool isMobileMenuOpen = false;

    private void ToggleMobileMenu()
    {
        isMobileMenuOpen = !isMobileMenuOpen;
    }

    private void CloseMobileMenu()
    {
        isMobileMenuOpen = false;
    }
}
